<!DOCTYPE html>
<html>
<head>
</head>
<script type="text/javascript" src="../../js/jquery-3.3.1.min.js"></script>
<script>
	$(function(){
		$("#cleanBtn").click(function(){
			$("#fileBtn").val('');
			$("#resultSpan").html('');
		});
	});
    function jsReadFiles(files) {
        if (files.length) {
            var file = files[0];
            var reader = new FileReader();
            if (/text+/.test(file.type)) {
                reader.onload = function() {
                	render(this.result);
                }
                reader.readAsText(file);
            } else if(/image+/.test(file.type)) {
                reader.onload = function() {
                    $('body').append('<img src="' + this.result + '"/>');
                }
                reader.readAsDataURL(file);
            }
        }
    }
    function render(result){
    	var arr = result.split("\n");
    	var hour=0,minute=0,second=0;
    	for(var i=0;i<arr.length;i++){
    		var t = arr[i];
    		if(t.length>0){
    			var x = t.split(':');
    			if(x.lengt==1){
    				console.log('error:'+t)
    			}else if(x.length==2){
    				minute=minute+parseInt(x[0]);
    				second=second+parseInt(x[1]);
    			}else if(x.length==3){
    				hour=hour+parseInt(x[0]);
    				minute=minute+parseInt(x[1]);
    				second=second+parseInt(x[2]);
    			}
    		}
    	}
    	var sum = hour*3600+minute*60+second;
    	var h1 = parseInt(sum/3600);
    	var m1 = parseInt( (sum -h1*3600)/60);
    	var s1 = sum-h1*3600-m1*60;
    	 $('#resultSpan').html('共计：' + h1 + '时'+m1+'分'+s1+'秒');
    	 
    }



</script>
<body>
	<center>
		select file:<input type="file" onchange="jsReadFiles(this.files)" id="fileBtn"/>
		<br/><br/>
		<button onclick="jsReadFiles();">read</button>&nbsp;&nbsp;&nbsp;&nbsp;
		<button id="cleanBtn">clear</button>
		<br/><br/>
		<span id="resultSpan"></span>
	</center>
</body>

</html>